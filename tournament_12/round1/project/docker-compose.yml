version: '3'

services:
  app:
    build: .
    restart: always
    depends_on:
      - mongo
    ports:
      - "80:8080"
    links:
      - mongo
    environment:
      - MONGOURI=mongodb://mongo:27017/devchallenge
      #- JWT_SECRET=custom_jwt_secret
      #- INSTANCE_ID=cluster_instance1$Sd31s
      #- MAX_DISK_STORAGE=20971520
    volumes:
      - local_storage:/app/local_storage

  mongo:
    image: mongo:3.6.4-jessie
    restart: always
    volumes:
      - /data/mongodb/db:/data/db
    ports:
      - "27017:27017"

volumes:
  local_storage: